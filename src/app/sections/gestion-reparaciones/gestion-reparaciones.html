<!-- Secci√≥n principal -->
<section class="p-8 bg-[#0D1117] min-h-screen flex flex-col items-center">
  <!-- T√≠tulo -->
  <h2 id="titulo" class="titulo text-3xl font-bold mb-8 text-white text-center">
    √ìrdenes registradas
  </h2>

  <!-- Card contenedor -->
  <div class="bg-gray-900/90 rounded-lg shadow-lg border border-white/10 p-6 w-full max-w-[95%] mx-auto">
    
    <!-- Filtros -->
    <div class="flex flex-wrap gap-4 mb-6 text-white">
      <!-- Estado -->
      <div>
        <label for="estadoFiltro" class="block mb-1 text-sm">Estado:</label>
        <select id="estadoFiltro" [(ngModel)]="estadoFiltro" class="bg-gray-800 text-white px-3 py-2 rounded">
          <option value="">Todos</option>
          <option value="Recibido">Recibido</option>
          <option value="En proceso">En proceso</option>
          <option value="Finalizado">Finalizado</option>
        </select>
      </div>

      <!-- Prioridad -->
      <div>
        <label for="prioridadFiltro" class="block mb-1 text-sm">Prioridad:</label>
        <select id="prioridadFiltro" [(ngModel)]="prioridadFiltro" class="bg-gray-800 text-white px-3 py-2 rounded">
          <option value="">Todas</option>
          <option value="Alta">Alta</option>
          <option value="Media">Media</option>
          <option value="Baja">Baja</option>
        </select>
      </div>

      <!-- Cliente -->
      <div class="w-64">
        <label for="clienteFiltro" class="block mb-1 text-sm">Cliente:</label>
        <input
          id="clienteFiltro"
          [(ngModel)]="clienteFiltro"
          placeholder="Buscar cliente..."
          class="bg-gray-800 text-white px-3 py-2 rounded w-full"
        />
      </div>
    </div>

    <!-- Tabla -->
    <div class="overflow-x-auto">
      <table class="min-w-[1400px] w-full text-sm text-white text-center">
        <thead class="bg-gray-800 text-blue-400">
          <tr>
            <th class="px-4 py-2">Cliente</th>
            <th class="px-4 py-2">Tel√©fono</th>
            <th class="px-4 py-2">Direcci√≥n</th>
            <th class="px-4 py-2">Tipo</th>
            <th class="px-4 py-2">Marca</th>
            <th class="px-4 py-2">Modelo</th>
            <th class="px-4 py-2">Accesorios</th>
            <th class="px-4 py-2">Condiciones</th>
            <th class="px-4 py-2">Descripci√≥n</th>
            <th class="px-4 py-2">Falla</th>
            <th class="px-4 py-2">Diagn√≥stico</th>
            <th class="px-4 py-2">Estado</th>
            <th class="px-4 py-2">Prioridad</th>
            <th class="px-4 py-2">Ingreso</th>
            <th class="px-4 py-2">Entrega</th>
            <th class="px-4 py-2">Finalizaci√≥n</th>
            <th class="px-4 py-2">Presupuesto</th>
            <th class="px-4 py-2">Costo</th>
            <th class="px-4 py-2">Pago</th>
            <th class="px-4 py-2">Autorizaci√≥n</th>
            <th class="px-4 py-2">Notas</th>
            <th class="px-4 py-2">Historial</th>
            <th class="px-4 py-2">Acciones</th>
          </tr>
        </thead>

        <tbody class="divide-y divide-white/10">
          <!-- ‚úÖ Angular 20: nueva sintaxis de control flow -->
          @for (orden of ordenesFiltradas; track $index) {
            <tr>
              <td class="px-4 py-2">{{ orden.cliente.nombre }}</td>
              <td class="px-4 py-2">{{ orden.cliente.telefono }}</td>
              <td class="px-4 py-2">{{ orden.cliente.direccion }}</td>

              <td class="px-4 py-2">{{ orden.dispositivo.tipo }}</td>
              <td class="px-4 py-2">{{ orden.dispositivo.marca }}</td>
              <td class="px-4 py-2">{{ orden.dispositivo.modelo }}</td>
              <td class="px-4 py-2">{{ orden.dispositivo.accesorios }}</td>
              <td class="px-4 py-2">{{ orden.dispositivo.condiciones }}</td>
              <td class="px-4 py-2">{{ orden.dispositivo.descripcionAdicional }}</td>

              <td class="px-4 py-2">{{ orden.informacion.falla }}</td>
              <td class="px-4 py-2">{{ orden.informacion.diagnostico }}</td>

              <!-- Estado con badge -->
              <td class="px-4 py-2">
                <span class="badge"
                  [ngClass]="{
                    'badge-estado-recibido': orden.informacion.estado === 'Recibido',
                    'badge-estado-proceso': orden.informacion.estado === 'En proceso',
                    'badge-estado-finalizado': orden.informacion.estado === 'Finalizado'
                  }">
                  {{ orden.informacion.estado }}
                </span>
              </td>

              <!-- Prioridad con badge -->
              <td class="px-4 py-2">
                <span class="badge"
                  [ngClass]="{
                    'badge-prioridad-alta': orden.informacion.prioridad === 'Alta',
                    'badge-prioridad-media': orden.informacion.prioridad === 'Media',
                    'badge-prioridad-baja': orden.informacion.prioridad === 'Baja'
                  }">
                  {{ orden.informacion.prioridad }}
                </span>
              </td>

              <td class="px-4 py-2">{{ orden.informacion.fechaIngreso }}</td>
              <td class="px-4 py-2">{{ orden.informacion.fechaEntrega }}</td>
              <td class="px-4 py-2">{{ orden.informacion.fechaFinalizacion }}</td>

              <td class="px-4 py-2">{{ orden.costos.presupuesto }}</td>
              <td class="px-4 py-2">{{ orden.costos.costoFinal | currency:'USD' }}</td>
              <td class="px-4 py-2">{{ orden.costos.formaPago }}</td>
              <td class="px-4 py-2">{{ orden.costos.autorizacion ? 'S√≠' : 'No' }}</td>

              <td class="px-4 py-2">{{ orden.seguimiento.notasInternas }}</td>
              <td class="px-4 py-2">{{ orden.seguimiento.historial }}</td>

              <!-- Acciones -->
              <td class="px-4 py-2 space-x-3 flex justify-center">
                <button (click)="editarOrden($index)" title="Editar" class="text-blue-400 hover:text-blue-300">
                  <span class="icono" aria-hidden="true">‚úèÔ∏è</span>
                </button>
                <button (click)="eliminarOrden($index)" title="Eliminar" class="text-red-500 hover:text-red-400">
                  <span class="icono" aria-hidden="true">üóëÔ∏è</span>
                </button>
                <button (click)="imprimirOrden($index)" title="Imprimir" class="text-white hover:text-gray-300">
                  <span class="icono" aria-hidden="true">üñ®Ô∏è</span>
                </button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</section>